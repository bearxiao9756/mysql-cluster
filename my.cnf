[mysqld]
# Basic settings
port = 3306
bind-address = 0.0.0.0
datadir = /var/lib/mysql
default_authentication_plugin = mysql_native_password

# Replication settings
log_bin = mysql-bin
binlog_format = ROW
gtid_mode = ON
enforce_gtid_consistency = ON
log_slave_updates = ON
expire_logs_days = 7

# Group Replication settings
plugin_load_add = group_replication.so
group_replication_bootstrap_group = OFF # 仅在启动第一个节点时设为 ON

# 统一的集群名称
group_replication_group_name = "AAAAAAAA-AAAA-AAAA-AAAA-123456789012" 

# 集群内的所有节点地址 (Docker Compose 会用服务名解析)
group_replication_group_seeds = mysql1:3306,mysql2:3306,mysql3:3306 

# 每个节点的唯一地址 (将在 docker-compose 中覆盖)
# group_replication_local_address = 

# 推荐单主模式 (Primary)
group_replication_mode = single-primary 

# 用于分布式恢复的账号和密码 (将在 docker-compose 中设置)
# group_replication_recovery_user = 
# group_replication_recovery_password =